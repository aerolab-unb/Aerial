

<!DOCTYPE html>
<html class="writer-html5" lang="en,pt-BR" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Cross-compilation &mdash; CoopRobo 1.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Registradores" href="3.3-register.html" />
    <link rel="prev" title="Getting used to Linux" href="3.1-Ambient_Linux.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home" alt="Documentation Home"> CoopRobo
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Robots</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../aerial.html">Aerial Robots</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../vr01.html">VR-01</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../1-autopilot/1.0-pilot.html">Autopilot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-autopilot/1.1-config_pilot.html">Autopilot Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2-embedded_system/2.0-embedded_system.html">Embedded System</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="3.0-intro.html">Using the embedded computer</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="3.1-Ambient_Linux.html">Getting used to Linux</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Cross-compilation</a></li>
<li class="toctree-l4"><a class="reference internal" href="3.3-register.html">Registradores</a></li>
<li class="toctree-l4"><a class="reference internal" href="3.4-Serial.html">Comunicação Serial</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../vr01.html#references">References</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../mobile.html">Mobile Robots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../manipulators.html">Manipulators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs-ref.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../camera.html">Camera</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">CoopRobo</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../aerial.html">Aerial Robots</a> &raquo;</li>
        
          <li><a href="../../vr01.html">VR-01</a> &raquo;</li>
        
          <li><a href="3.0-intro.html">Using the embedded computer</a> &raquo;</li>
        
      <li>Cross-compilation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/aerial/vr01/3-gumstix/3.2-CrossCompilation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="cross-compilation">
<h1>Cross-compilation<a class="headerlink" href="#cross-compilation" title="Permalink to this headline">¶</a></h1>
<p>Cross-compilation occurs when a device compiles source code for a different platform than the one that compiled the code, we usually have a development environment that is in an architecture different from the architecture of the board on which we will run our program. So that our notebooks or desktops can generate a binary, a program that runs on another architecture, there is the Cross Compilation. For example, in our case, a computer with Linux Ubuntu, using an Intel or AMD processor with x86 architecture, will compile code for the embedded computer running an adapted Linux system running on a completely different architecture.</p>
<p>Using cross-compilation to work with embedded systems is very common, especially when they do not have the processing capacity to support a compiler. For us, it would be possible to compile in the embedded system itself, however, although the resources are not so limited, we do not want to waste them. In addition, programming on a regular computer with several different IDE types is much better than programming on an embedded computer with limited interface capabilities.</p>
<p>To accomplish this cross-compilation process must first obtain a Software Development Kit, also known as SDK or devkit. The SDK is nothing more than a set of software development tools that make it possible to create and compile software for a different system.</p>
<div class="section" id="installing-the-sdk">
<h2>Installing the SDK<a class="headerlink" href="#installing-the-sdk" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Yocto project offers a tutorial on how to obtain and install the SDK for your system on the GitHub <a class="reference external" href="https://github.com/gumstix/yocto-manifest/wiki/Cross-Compile-with-Yocto-SDK">Cross Compile with Yocto SDK</a> page. However, all the procedures performed and the results obtained in the installation will be described in this topic.</p>
</div>
<p>To obtain the SDK for the image of OS we are using, simply perform the following procedures:</p>
<ol class="arabic simple">
<li><p><strong>Creation of directories</strong></p></li>
</ol>
<p>We will create a directory called <strong>workspace</strong> where you will install the SDK and compile the codes in the future. Choose a location convenient for you and execute the commands.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mkdir workspace
$ cd workspace
$ wget http://gumstix-yocto.s3.amazonaws.com/sdk.sh
</pre></div>
</div>
<div class="figure align-center">
<img alt="../../../_images/sdk_download.png" src="../../../_images/sdk_download.png" />
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">wget</span></code> command will download the SDK for Gumstix systems. This process may take a while, depending on your download speed.</p>
</div>
<ol class="arabic simple" start="2">
<li><p><strong>Checking permissions</strong></p></li>
</ol>
<p>After the download is complete, check the file permissions by running the command <code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">-la</span> <span class="pre">sdk.sh</span></code>. If the terminal returns that you are allowed to run this file, skip to the next procedure. Otherwise, you will need to change the file's permissions using the <code class="docutils literal notranslate"><span class="pre">chmod</span></code> command.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Recalling, the first three spaces indicate the owner's permissions and, basically, we have 3 basic permissions, <strong>r</strong>, <strong>w</strong> and <strong>x</strong>, indicating permission to read, white and execute, respectively.</p>
</div>
<p>For example, in the image below, the file has read and white permission, but cannot be executed.</p>
<div class="figure align-center">
<img alt="../../../_images/sdk_permission.png" src="../../../_images/sdk_permission.png" />
</div>
<p>To add the permission to run, just execute command <code class="docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">+x</span> <span class="pre">sdk.sh</span></code>.</p>
<div class="figure align-center">
<img alt="../../../_images/sdk_permission2.png" src="../../../_images/sdk_permission2.png" />
</div>
<ol class="arabic simple" start="3">
<li><p><strong>Installation</strong></p></li>
</ol>
<p>To start the installation, run the <em>sdk.sh</em> file. Once prompted, enter the directory you want to install the SDK in (we recommend creating a repository called <em>sdk</em>) and confirm.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ./sdk.sh
</pre></div>
</div>
<div class="figure align-center">
<img alt="../../../_images/sdk_install.png" src="../../../_images/sdk_install.png" />
</div>
<ol class="arabic simple" start="4">
<li><p><strong>Setting up the environment</strong></p></li>
</ol>
<p>Installing the SDK will generate a folder with the content shown in the figure below.</p>
<div class="figure align-center">
<img alt="../../../_images/sdk_ls.png" src="../../../_images/sdk_ls.png" />
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The &quot;sysroot&quot; directory contains the root files of the two systems, both the system that will compile the code and the system that will run the program, and the first file in the list imports the adrdresses and variables important for compiling the code.</p>
</div>
<p>In order to proceed with the compilation of the code it, is necessary to execute the following command line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="n">sdk</span><span class="o">/</span><span class="n">environment</span><span class="o">-</span><span class="n">setup</span><span class="o">-</span><span class="n">cortexa8hf</span><span class="o">-</span><span class="n">neon</span><span class="o">-</span><span class="n">poky</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnueabi</span>
</pre></div>
</div>
<div class="figure align-center">
<img alt="../../../_images/sdk_source.png" src="../../../_images/sdk_source.png" />
</div>
</div>
<div class="section" id="compiling-hello-world">
<h2>Compiling Hello World<a class="headerlink" href="#compiling-hello-world" title="Permalink to this headline">¶</a></h2>
<p>Once the installation is done, we can test the cross-compilation by creating a simple script. Let's create a file in the text editor called &quot;helloworld.c&quot;, paste the code below and save it in the <strong>workspace directory</strong>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#include &lt;stdio.h&gt;</span>
<span class="nb">int</span> <span class="n">main</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
    <span class="p">{</span>
    <span class="n">printf</span> <span class="p">(</span><span class="s2">&quot;Hello World!</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>We can now run the command <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">&lt;code_name&gt;</span></code> to create an executable binary file from <em>helloworld.c</em>.</p>
<div class="figure align-center">
<img alt="../../../_images/sdk_compile.png" src="../../../_images/sdk_compile.png" />
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">make</span></code> command is actually a simplification of an extensive command line that calls a <strong>arm-poky-Linux-gnueabi-gcc</strong> compiler and gives it the parameters contained in the SDK folder. All this thanks to the &quot;source&quot; command previously used.</p>
</div>
<p>Once the code executable is obtained, just copy it to one of the memory card folders and transfer it to Overo and execute it. Remember that the main directory is the <code class="docutils literal notranslate"><span class="pre">/home/root/</span></code> directory, so if the file is placed inside this directory it will be very easy to find it.</p>
<p>After inserting the memory card in Overo, we can start it normally. When started, we go to the directory where the program was saved and run it with the command <code class="docutils literal notranslate"><span class="pre">./helloworld</span></code>. If everything goes well, the program should be executed, similar to the figure below.</p>
<div class="figure align-center">
<img alt="../../../_images/sdk_compile2.png" src="../../../_images/sdk_compile2.png" />
</div>
<div class="section" id="references">
<h3>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>PITA, H. C. Desenvolvimento de sistema de comunicação multiplataforma para veículos aéreos de asa fixa. Faculdade de Tecnologia, Universidade de Brasília, 2018.</p></li>
<li><p><a class="reference external" href="https://github.com/gumstix/yocto-manifest/wiki/Cross-Compile-with-Yocto-SDK">Cross Compile with Yocto SDK</a> - github.com/gumstix</p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="3.3-register.html" class="btn btn-neutral float-right" title="Registradores" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="3.1-Ambient_Linux.html" class="btn btn-neutral float-left" title="Getting used to Linux" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2019, Gabriel Araujo

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>