

<!DOCTYPE html>
<html class="writer-html5" lang="en,pt-BR" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Serial Communication &mdash; CoopRobo 1.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Mobile Robots" href="../../../mobile.html" />
    <link rel="prev" title="Registers" href="3.3-register.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home" alt="Documentation Home"> CoopRobo
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Robots</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../aerial.html">Aerial Robots</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../vr01.html">VR-01</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../1-autopilot/1.0-pilot.html">Autopilot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-autopilot/1.1-config_pilot.html">Autopilot Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2-embedded_system/2.0-embedded_system.html">Embedded System</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="3.0-intro.html">Using the embedded computer</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="3.1-Ambient_Linux.html">Getting used to Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="3.2-CrossCompilation.html">Cross-compilation</a></li>
<li class="toctree-l4"><a class="reference internal" href="3.3-register.html">Registers</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Serial Communication</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../vr01.html#references">References</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../mobile.html">Mobile Robots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../manipulators.html">Manipulators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs-ref.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../camera.html">Camera</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">CoopRobo</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../aerial.html">Aerial Robots</a> &raquo;</li>
        
          <li><a href="../../vr01.html">VR-01</a> &raquo;</li>
        
          <li><a href="3.0-intro.html">Using the embedded computer</a> &raquo;</li>
        
      <li>Serial Communication</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/aerial/vr01/3-gumstix/3.4-Serial.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="serial-communication">
<h1>Serial Communication<a class="headerlink" href="#serial-communication" title="Permalink to this headline">¶</a></h1>
<p>The main characteristic of serial communication is the process of sending data one bit at a time, sequentially, through a communication channel or bus. Unlike parallel communication, where all bits of each symbol are sent together.</p>
<p>In order to enable the conversion, transmission and reception of data in a serial way, which were originally arranged in parallel, the <strong>UART</strong> format emerges, an acronym for Universal Asynchrounous Receiver/Transmiter.</p>
<p>The term &quot;Universal&quot; refers to the characteristic of the data format and speed being configurable, while &quot;Asynchronous&quot; refers to the way in which serial communication occurs, in which the devices are not continuously synchronized by a common clock signal.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>More details on UART communication can be seen in <a class="reference external" href="https://microcontrollerslab.com/uart-communication-working-applications/">Introduction to UART Communication - microcontrollerslab.com</a>.</p>
</div>
<p>In the case of Overo, we have three Communication Systems <strong>UART</strong> implemented by hardware at our disposal. What makes any manual implementation through software using GPIO unnecessary.</p>
<p>Now let's understand how the UART communication protocol works. This communication works by connecting the transmitter (<strong>TX</strong>) of one device to the receiver (<strong>RX</strong>) of another device, in this case, only <strong>TX</strong> makes changes to the line voltage level , therefore, communication is, for each connection, a one-way street. Therefore, to perform a two-way communication we will use two connections, one will be the <strong>RX</strong> connection from device 1 with <strong>TX</strong> from device 2 and the other connection will be the opposite, <strong>RX</strong> from device 2 with <strong>TX</strong> from device 1, similar to the image below.</p>
<div class="figure align-center">
<img alt="../../../_images/UART_bus.png" src="../../../_images/UART_bus.png" />
</div>
<p>We can analyze the communication situation at bit level. For example, for a UART communication type &quot;8N1&quot; (8 data bits, 0 parity bits and 1 stop bit) we will have the channel in <strong>IDLE</strong> state, which means &quot;not operating&quot;, represented by the static voltage level high. Therefore, when the intention is to start the communication, a low level pulse is sent and then the eight data bits are sent, which will be accompanied by a stop bit in a high state.</p>
<p>It's important to note that the function of the stop bit is to pause the transmission for some internal processing of the devices, therefore, there is no need for any additional time between the transmitted data.</p>
<p>As this is an asynchronous communication, it is essential that the speed of the communication is predetermined. This speed is usually given in Baud rate, a unit of measurement for the number of signal units sent per second.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The term &quot;Baud rate&quot; is used to measure the speed of data transmission between devices. A baud is a measure of signaling speed and represents the number of changes in the transmission line (whether in frequency, amplitude, phase, etc.) or events per second.</p>
</div>
<p>The following figure shows a schematic illustrating how UART communication works. In the illustration, the communication speed is 10,000,000 baud/s.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../../_images/UART_8N1.png"><img alt="../../../_images/UART_8N1.png" src="../../../_images/UART_8N1.png" style="width: 500px;" /></a>
</div>
<div class="section" id="particularities-of-gumstix-overo">
<h2>Particularities of Gumstix Overo<a class="headerlink" href="#particularities-of-gumstix-overo" title="Permalink to this headline">¶</a></h2>
<p>By default, the Tobi expansion card provides only two of the UARTs available on Overo module computer for use via its pins. As can be seen in the image below, UART1 is connected to pins 10 and 9 and UART3 is connected to pins 22 and 21. It's also important to say that the UART3 serial port is the same pin used by the <strong>USB console</strong>, ie , it's the same pin that we use to control Gumstix from the computer, that is, in standard configuration system messages and messages to the system are sent through this port.</p>
<div class="figure align-center" id="id1">
<img alt="../../../_images/Pinos_Tobi.png" src="../../../_images/Pinos_Tobi.png" />
<p class="caption"><span class="caption-text">Pin diagram of the tobi expansion card.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>If the two serial ports already mentioned are not enough, exist also the UART2 serial port. However, by default, it's not available on any of the pins on the Tobi board for our use. In fact, it was reserved to communicate with Bluetooth, yet only later versions of the Overo embedded computer used by us have Bluetooth, so we can, if necessary, export UART2 to the pins and use them. To use this serial port, it is necessary to modify <em>u-boot</em> in order to multiplex its function to GPIO 146/147 which, as shown in the previous figure, are connected to pins 29 and 27. Therefore, to do this it is necessary to modify the file &quot;overo.h&quot; removing the command lines for the GPIO mode from pins 146 and 147, removing the lines that disable UART2 and adding the lines that enable serial communication over UART2.</p>
<p>To understand, in detail, what needs to be done and which registers will be changed, consult the serial communication section of the processor's Technical Reference Manual (TRM). However, there is a topic in the <a class="reference external" href="http://gumstix.8.x6.nabble.com/Using-UART-2-on-an-Overo-td660403.html">Gumstix Discussion Forum</a> that directly indicates what changes must be made to the &quot; u-boot&quot; in order to use UART2, although the solution presented in that forum was not tested during this work.</p>
</div>
<div class="section" id="uart-configuration">
<h2>UART configuration<a class="headerlink" href="#uart-configuration" title="Permalink to this headline">¶</a></h2>
<p>As previously mentioned, the embedded computer has specific hardware for UART communication, in other words, it's not necessary to perform a manual implementation to use UART communication, just write in some registers to send the message.</p>
<p>In fact, in our case it is even simpler because the installed operating system already has configured drivers for the application of serial communication. Therefore, it isn't necessary to access the physical memory of the device, we just need to write in the driver what should be transmitted.</p>
<p>The serial communication drivers are files of type character, named &quot;<strong>ttyOx</strong>&quot;, where &quot;<strong>x</strong>&quot; represents the unique number of each UART. These drivers are located in &quot;<strong>/dev</strong>&quot; and function as a communication terminal.</p>
<p>For example, the &quot;<strong>ttyO2</strong>&quot; driver is the serial communication driver for the <strong>USB Console</strong> port, the same one we connect to the computer, that is, when writing to this port we will write on the computer connected to Gumstix and when reading this port we will be reading the computer. In other words, writing or reading in this driver will have the same final result of calling, respectively, the function <code class="docutils literal notranslate"><span class="pre">printf</span> <span class="pre">()</span></code> or <code class="docutils literal notranslate"><span class="pre">scanf</span> <span class="pre">()</span></code>, when a computer is connected to that port with the terminal open.</p>
<p>The configuration of the serial ports can be done in two ways, by command lines in the Linux terminal or by a code that changes the hardware settings. The simplest and, again, the most limited or least efficient is the configuration through command lines, the configuration in this way is usually used only when done by a human user in real time.</p>
<p>To perform the configuration through the Linux terminal, we must use the command <code class="docutils literal notranslate"><span class="pre">stty</span></code>, since this command has a huge number of parameters that allows to establish serial communication in the desired way.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To view all parameters of the <code class="docutils literal notranslate"><span class="pre">stty</span></code> command, just run <code class="docutils literal notranslate"><span class="pre">stty</span> <span class="pre">--help</span></code> in the terminal.</p>
</div>
<p>If, for example, the command line <code class="docutils literal notranslate"><span class="pre">stty</span> <span class="pre">-F</span> <span class="pre">/</span> <span class="pre">dev</span> <span class="pre">/</span> <span class="pre">ttyO0</span> <span class="pre">-a</span></code> is executed, all the serial communication settings <strong>UART1</strong> of the device will be printed. To print only the main settings, you must delete the <code class="docutils literal notranslate"><span class="pre">-a</span></code>, the last option of the command. If changing the speed is desirable, it can be changed simply by adding the desired speed to the end of the command line.</p>
<p>The figure below shows an example of configuring UART1 using the Linux command terminal.</p>
<div class="figure align-center">
<img alt="../../../_images/config_uart1.png" src="../../../_images/config_uart1.png" />
</div>
<p>The other way to configure the serial communication made by these drivers without manually changing the contents of the physical address of the memory is with the aid of the &quot;<strong>termios.h</strong>&quot; library. This library has a wide variety of functions that configure serial communication based on the parameters of a &quot;<strong>termios</strong>&quot; structure, also defined in this library.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>More information about the <strong>termios.h library</strong> can be found at <a class="reference external" href="https://man7.org/linux/man-pages/man0/termios.h.0p.html">termios.h - Linux manual page</a>.</p>
</div>
<p>There are two parameters of UART communication, in addition to those mentioned above, which stand out, the minimum number of bits that are expected to be read at each reading attempt and the maximum time to wait for a new character after the transmission of the last character and after the minimum number of characters to be reached.</p>
<p>The minimum number of bits expected to be read and the maximum wait time for the next bit in tenths of a second can be configured with the following commands <code class="docutils literal notranslate"><span class="pre">termios.c_cc</span> <span class="pre">[VMIN]</span> <span class="pre">=</span></code> and <code class="docutils literal notranslate"><span class="pre">termios.c_cc</span> <span class="pre">[VTIME]</span> <span class="pre">=</span></code>, where <code class="docutils literal notranslate"><span class="pre">termios</span></code> is the name of its structure. For the speed setting, it is recommended to use the function <code class="docutils literal notranslate"><span class="pre">cfsetspeed</span> <span class="pre">()</span></code>, while the function <code class="docutils literal notranslate"><span class="pre">cfmakeraw</span> <span class="pre">()</span></code> configures, in addition to other parameters, the operation without parity bit and with 8 data bits. After making the adjustments to the structure, it is still necessary to execute the function <code class="docutils literal notranslate"><span class="pre">cfsetattr</span> <span class="pre">()</span></code> for the changes to be made in the UART.</p>
<p>Below is the code used to configure the serial communication of Overo computers. Note that in this configuration function the &quot;O_NONBLOCK&quot; flag was not used in the &quot;open ()&quot; function and the minimum number of characters to be returned after an attempt to read was set to 1, so if the code is executed and no information is entered sent to this channel the processor will wait forever for that character. The time count, set to 0.1 second, does not start until the minimum number of characters has been reached.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#include &lt;stdio.h&gt;</span>
<span class="c1">#include &lt;string.h&gt;</span>
<span class="c1">#include &lt;unistd.h&gt;</span>
<span class="c1">#include &lt;fcntl.h&gt;</span>
<span class="c1">#include &lt;termios.h&gt;</span>

<span class="n">void</span> <span class="n">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">struct</span> <span class="n">termios</span> <span class="n">cUART1</span><span class="p">;</span>
    <span class="nb">int</span> <span class="n">UART1</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;/dev/ttyO0&quot;</span><span class="p">,</span> <span class="n">O_RDWR</span><span class="p">);</span>

    <span class="k">if</span><span class="p">(</span><span class="n">tcgetattr</span><span class="p">(</span><span class="n">UART1</span><span class="p">,</span><span class="o">&amp;</span><span class="n">cUART1</span><span class="p">))</span>
        <span class="n">printf</span><span class="p">(</span><span class="s2">&quot;Erro tcgetattr&quot;</span><span class="p">);</span>
    <span class="n">cfmakeraw</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cUART1</span><span class="p">);</span>
    <span class="n">cfsetspeed</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cUART1</span><span class="p">,</span><span class="n">B115200</span><span class="p">);</span>
    <span class="n">cUART1</span><span class="o">.</span><span class="n">c_cflag</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">CSTOPB</span><span class="p">;</span>

    <span class="n">cUART1</span><span class="o">.</span><span class="n">c_cc</span><span class="p">[</span><span class="n">VMIN</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">cUART1</span><span class="o">.</span><span class="n">c_cc</span><span class="p">[</span><span class="n">VTIME</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">tcsetattr</span><span class="p">(</span><span class="n">UART1</span><span class="p">,</span> <span class="n">TCSANOW</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">cUART1</span><span class="p">))</span>
        <span class="n">printf</span><span class="p">(</span><span class="s2">&quot;Erro tcsetattr&quot;</span><span class="p">);</span>

<span class="p">}</span>
</pre></div>
</div>
<p><a class="reference download internal" download="" href="../../../_downloads/cc6e101fc26f2c3c635ddf31698cc5a9/config_UART.c"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">commented</span> <span class="pre">code</span></code></a></p>
<p>The following figure shows an example of UART1 configuration using the configuration code above.</p>
<div class="figure align-center">
<img alt="../../../_images/config_uart1.png" src="../../../_images/config_uart1.png" />
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In order to simplify the configuration of the UART within another code, some modifications were made to the previous code to convert it into a function for configuring serial communication, as shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">configUART1</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">struct</span> <span class="n">termios</span> <span class="n">cUART1</span><span class="p">;</span>
    <span class="nb">int</span> <span class="n">UART1</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;/dev/ttyO0&quot;</span><span class="p">,</span> <span class="n">O_RDWR</span><span class="p">);</span>

    <span class="k">if</span><span class="p">(</span><span class="n">tcgetattr</span><span class="p">(</span><span class="n">UART1</span><span class="p">,</span><span class="o">&amp;</span><span class="n">cUART1</span><span class="p">))</span>
        <span class="n">printf</span><span class="p">(</span><span class="s2">&quot;Erro tcgetattr&quot;</span><span class="p">);</span>
    <span class="n">cfmakeraw</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cUART1</span><span class="p">);</span>
    <span class="n">cfsetspeed</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cUART1</span><span class="p">,</span><span class="n">B115200</span><span class="p">);</span>
    <span class="n">cUART1</span><span class="o">.</span><span class="n">c_cflag</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">CSTOPB</span><span class="p">;</span>

    <span class="n">cUART1</span><span class="o">.</span><span class="n">c_cc</span><span class="p">[</span><span class="n">VMIN</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">cUART1</span><span class="o">.</span><span class="n">c_cc</span><span class="p">[</span><span class="n">VTIME</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">tcsetattr</span><span class="p">(</span><span class="n">UART1</span><span class="p">,</span> <span class="n">TCSANOW</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">cUART1</span><span class="p">))</span>
        <span class="n">printf</span><span class="p">(</span><span class="s2">&quot;Erro tcsetattr&quot;</span><span class="p">);</span>

    <span class="k">return</span> <span class="n">UART1</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>Once the configuration was made, the following code was also implemented in order to test the communication between two computers. In the test, one device sends a message to the other device that responds with a similar message to the first device, then both devices print the received message.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">main</span><span class="p">()</span>
<span class="p">{</span>

    <span class="nb">int</span> <span class="n">UART1</span> <span class="o">=</span> <span class="n">configUART1</span><span class="p">();</span>  <span class="o">//</span> <span class="n">call</span> <span class="n">the</span> <span class="n">UART</span> <span class="n">configuration</span> <span class="n">function</span>
    <span class="n">char</span> <span class="n">dis</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">out</span><span class="p">[</span><span class="mi">100</span><span class="p">],</span> <span class="n">string</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span>

    <span class="n">printf</span><span class="p">(</span><span class="s2">&quot;What device am I?&quot;</span><span class="p">);</span>
    <span class="n">scanf</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%c</span><span class="s2">&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dis</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="n">dis</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">string</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">strcat</span><span class="p">(</span><span class="n">string</span><span class="p">,</span> <span class="s2">&quot;Hello! This is a message from the device&quot;</span><span class="p">);</span>
    <span class="n">strcat</span><span class="p">(</span><span class="n">string</span><span class="p">,</span> <span class="n">dis</span><span class="p">);</span>

    <span class="o">//</span> <span class="n">testa</span> <span class="n">UART</span>
    <span class="n">write</span><span class="p">(</span><span class="n">UART1</span><span class="p">,</span> <span class="n">string</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">string</span><span class="p">));</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">read</span><span class="p">(</span><span class="n">UART1</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s2">&quot;Message read by the device </span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">dis</span><span class="p">,</span> <span class="n">out</span><span class="p">);</span>
    <span class="n">close</span><span class="p">(</span><span class="n">UART1</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><a class="reference download internal" download="" href="../../../_downloads/7205c7fed245a52f9e75b37d4115d27d/comun_UART.c"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">the</span> <span class="pre">complete</span> <span class="pre">code</span></code></a></p>
<p>Since the two devices are identical, it will be necessary to connect pin 10 of one device with pin 9 of the other device and vice versa. Using this code as a basis it is possible to send any message of up to 100 characters from one device to the other.</p>
<p>The following figure shows the result of testing the codes presented. In this figure we can see two Linux terminals, each linked to an embedded computer, and both call the same function, right after that we see the message read by each of the devices.
.. figura</p>
<div class="section" id="references">
<h3>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>PITA, H. C. Desenvolvimento de sistema de comunicação multiplataforma para veículos aéreos de asa fixa. Faculdade de Tecnologia, Universidade de Brasília, 2018.</p></li>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Universal_asynchronous_receiver-transmitter">Universal asynchronous receiver-transmitter</a> - wikipedia.org</p></li>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Asynchronous_serial_communication">Asynchronous serial communication</a> - wikipedia.org</p></li>
<li><p><a class="reference external" href="http://newtoncbraga.com.br/index.php/telecom-artigos/1709-#:~:text=UART">Como funcionam as UARTs</a> - newtoncbraga.com.br</p></li>
<li><p><a class="reference external" href="https://ece353.engr.wisc.edu/serial-interfaces/uart-basics/">UART Basics</a> - ece353.engr.wisc.edu</p></li>
<li><p><a class="reference external" href="https://man7.org/linux/man-pages/man0/termios.h.0p.html">termios.h(0p) - Linux manual page</a> - man7.org</p></li>
<li><p><a class="reference external" href="https://linux.die.net/man/3/cfsetspeed">cfsetspeed(3) - Linux man page</a> - linux.die.net</p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../../mobile.html" class="btn btn-neutral float-right" title="Mobile Robots" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="3.3-register.html" class="btn btn-neutral float-left" title="Registers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2019, Gabriel Araujo

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>